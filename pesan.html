<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Pesan Untuk Saya - Chairul Iman</title>
  <link rel="stylesheet" href="style.css">
  <style>
   body {
  margin: 0;
  font-family: 'Poppins', sans-serif;
  height: 100vh;
  display: flex;
  flex-direction: column;
  background-color: #f0f2f5;
}

.navbar {
  background: #34495e;
  color: white;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 20px;
}

.toggle-sidebar {
  background: none;
  border: none;
  color: white;
  font-size: 28px;
  cursor: pointer;
}

.container {
  display: flex;
  flex-grow: 1;
  overflow: hidden;
}

.sidebar {
  width: 260px;
  background: linear-gradient(180deg, #34495e, #2c3e50);
  color: white;
  display: flex;
  flex-direction: column;
  padding: 20px;
  transition: transform 0.3s ease;
  overflow-y: auto;
}

.sidebar.hidden {
  transform: translateX(-100%);
}

.sidebar h2 {
  margin: 0 0 15px 0;
  font-size: 26px;
  font-weight: bold;
  border-bottom: 2px solid #1abc9c;
  padding-bottom: 10px;
}

.menu-section {
  margin-top: 20px;
  text-align: left;
}

.menu-section h3 {
  margin: 10px 0;
  font-size: 18px;
  color: #1abc9c;
  cursor: pointer;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding-bottom: 5px;
  border-bottom: 1px solid #1abc9c;
}

.menu-section h3::after {
  content: '▼';
  font-size: 14px;
  transition: transform 0.3s;
}

.menu-section h3.open::after {
  transform: rotate(180deg);
}

.menu-section div {
  display: none;
  margin-top: 5px;
  margin-left: 10px;
}

.menu-section a {
  color: white;
  text-decoration: none;
  font-size: 16px;
  padding: 6px 8px;
  display: block;
  border-radius: 5px;
  transition: background 0.3s, padding-left 0.3s;
}

.menu-section a:hover {
  background-color: #1abc9c;
  padding-left: 14px;
}

.main-content {
  flex-grow: 1;
  padding: 40px;
  background-color: #ecf0f1;
  overflow-y: auto;
}

.section {
  margin-top: 20px;
  text-align: center;
}

.section h3 {
  margin-bottom: 20px;
  font-size: 28px;
  color: #2c3e50;
}

form {
  max-width: 600px;
  margin: 0 auto;
  background: white;
  padding: 20px;
  border-radius: 8px;
  box-shadow: 0 0 10px rgba(0,0,0,0.1);
}

form input, form textarea {
  width: 100%;
  padding: 12px;
  margin-bottom: 15px;
  border: 1px solid #ccc;
  border-radius: 6px;
  font-size: 16px;
}

form button {
  background-color: #1abc9c;
  color: white;
  border: none;
  padding: 12px 20px;
  font-size: 16px;
  border-radius: 6px;
  cursor: pointer;
  transition: background 0.3s;
}

form button:hover {
  background-color: #16a085;
}

.messages {
  margin-top: 30px;
  max-width: 600px;
  margin: 20px auto;
  background: white;
  padding: 20px;
  border-radius: 8px;
  box-shadow: 0 0 10px rgba(0,0,0,0.1);
}

.message {
  background: #f9f9f9;
  border-radius: 6px;
  margin-bottom: 15px;
  padding: 15px;
  border-left: 5px solid #1abc9c;
}

.message .message-header {
  font-weight: bold;
  color: #34495e;
}

.message p {
  color: #34495e;
}

.reply-btn {
  background-color: #1abc9c;
  color: white;
  border: none;
  padding: 8px 12px;
  font-size: 14px;
  border-radius: 4px;
  cursor: pointer;
  margin-top: 10px;
}

.reply-btn:hover {
  background-color: #16a085;
}

.reply-form {
  margin-top: 15px;
  display: none;
  padding-top: 10px;
}

.reply-form input, .reply-form textarea {
  width: 100%;
  margin-bottom: 10px;
}

.reply-form button {
  background-color: #16a085;
  color: white;
  border: none;
  padding: 8px 12px;
  font-size: 14px;
  border-radius: 4px;
  cursor: pointer;
}

.reply-form button:hover {
  background-color: #1abc9c;
}

.reply {
  background-color: #ecf0f1;
  margin-top: 10px;
  padding: 10px;
  border-left: 4px solid #1abc9c;
  margin-left: 20px;
}

.reply .reply-header {
  font-weight: bold;
  color: #34495e;
}

.reply p {
  color: #34495e;
}

@media (max-width: 768px) {
  .sidebar {
    position: fixed;
    height: 100%;
    z-index: 1000;
    top: 0;
    left: 0;
    transform: translateX(-100%);
    padding: 10px;
  }

  .sidebar.hidden {
    transform: translateX(0);
  }

  .main-content {
    padding: 20px;
  }

  form {
    padding: 15px;
  }

  .message {
    padding: 10px;
  }

  .navbar {
    padding: 10px;
  }
}
  </style>
</head>
<body>

  <div class="navbar">
    <button class="toggle-sidebar" id="toggleSidebarBtn" onclick="toggleSidebar()">☰</button>
  </div>

  <div class="container">
    <div class="sidebar" id="sidebar">
      <h2>Chairul Iman</h2>

      <div class="menu-section">
        <a href="index.html">Dashboard</a>
        <a href="about.html">Tentang Saya</a>
      </div>

      <div class="menu-section">
        <h3 onclick="toggleMenu(this)">Project Frekuensi</h3>
        <div>
          <a href="desain.html">Pengenalan Frekuensi</a>
          <a href="visualisasi.html">Visualisasi Frekuensi</a>
          <a href="frekuensi.html">Data Frekuensi</a>
          <a href="carifre.html">Cari Gelombang Otak</a>
          <a href="aplikasifre.html">Aplikasi Frekuensi</a>
        </div>
      </div>

      <div class="menu-section">
        <h3 onclick="toggleMenu(this)">Lainnya</h3>
        <div>
          <a href="website.html">My Website</a>
          <a href="memories.html">Memories</a>
        </div>
      </div>
      <div class="menu-section">
        <a href="quotes.html">Quotes</a>
      </div>
      <div class="menu-section">
        <a href="pesan.html">Pesan Untuk Saya</a>
      </div>
      <div class="menu-section">
        <a href="contact.html">Kontak Saya</a>
      </div>
    </div>

    <div class="main-content">
      <div class="section">
        <h3>Pesan untuk Saya</h3>
        <form onsubmit="submitMessage(event)">
          <input type="text" id="name" placeholder="Nama Anda" required>
          <textarea id="message" placeholder="Tulis pesan Anda disini..." rows="6" required></textarea>
          <button type="submit">Kirim Pesan</button>
        </form>
      </div>

      <div class="messages" id="messages">
        <!-- Pesan yang sudah terkirim akan muncul di sini -->
      </div>
    </div>
  </div>

  <script>
    function toggleMenu(header) {
      const menu = header.nextElementSibling;
      const isVisible = menu.style.display === 'block';
      document.querySelectorAll('.menu-section div').forEach(function(div) {
        div.style.display = 'none';
      });
      document.querySelectorAll('.menu-section h3').forEach(function(h3) {
        h3.classList.remove('open');
      });
      if (!isVisible) {
        menu.style.display = 'block';
        header.classList.add('open');
      }
      
    }
    function toggleSidebar() {
      const sidebar = document.getElementById('sidebar');
      const toggleBtn = document.getElementById('toggleSidebarBtn');
      sidebar.classList.toggle('hidden');

      if (sidebar.classList.contains('hidden')) {
        toggleBtn.innerHTML = '☰';
      } else {
        toggleBtn.innerHTML = '✖';
      }
    }

    function loadMessages() {
      const storedMessages = JSON.parse(localStorage.getItem('messages')) || [];
      const messagesContainer = document.getElementById('messages');
      messagesContainer.innerHTML = ''; // Clear existing messages

      storedMessages.forEach(function(message, index) {
        const messageContainer = document.createElement('div');
        messageContainer.classList.add('message');

        const messageHeader = document.createElement('div');
        messageHeader.classList.add('message-header');
        messageHeader.textContent = message.name;

        const messageContent = document.createElement('p');
        messageContent.textContent = message.text;

        const replyButton = document.createElement('button');
        replyButton.classList.add('reply-btn');
        replyButton.textContent = 'Balas';
        replyButton.onclick = function() {
          toggleReplyForm(index);
        };

        const replyForm = document.createElement('div');
        replyForm.classList.add('reply-form');
        replyForm.id = `reply-form-${index}`;

        const replyInput = document.createElement('textarea');
        replyInput.placeholder = "Tulis balasan Anda...";
        replyForm.appendChild(replyInput);

        const replySubmitButton = document.createElement('button');
        replySubmitButton.textContent = 'Kirim Balasan';
        replySubmitButton.onclick = function() {
          submitReply(index, replyInput.value);
        };
        replyForm.appendChild(replySubmitButton);

        messageContainer.appendChild(messageHeader);
        messageContainer.appendChild(messageContent);
        messageContainer.appendChild(replyButton);
        messageContainer.appendChild(replyForm);

        // Display replies for each message
        if (message.replies && message.replies.length > 0) {
          message.replies.forEach(function(reply) {
            const replyContainer = document.createElement('div');
            replyContainer.classList.add('reply');
            const replyHeader = document.createElement('div');
            replyHeader.classList.add('reply-header');
            replyHeader.textContent = 'Balasan:';
            const replyText = document.createElement('p');
            replyText.textContent = reply;
            replyContainer.appendChild(replyHeader);
            replyContainer.appendChild(replyText);
            messageContainer.appendChild(replyContainer);
          });
        }

        messagesContainer.appendChild(messageContainer);
      });
    }

    // Toggle visibility of the reply form
    function toggleReplyForm(index) {
      const replyForm = document.getElementById(`reply-form-${index}`);
      replyForm.style.display = replyForm.style.display === 'block' ? 'none' : 'block';
    }

    // Function to submit a reply
    function submitReply(messageIndex, replyText) {
      if (replyText.trim() === '') {
        alert('Balasan tidak boleh kosong!');
        return;
      }

      const storedMessages = JSON.parse(localStorage.getItem('messages')) || [];
      const message = storedMessages[messageIndex];

      // Create a new reply for the selected message
      if (!message.replies) {
        message.replies = [];
      }
      message.replies.push(replyText);

      // Save the updated message with replies back to localStorage
      localStorage.setItem('messages', JSON.stringify(storedMessages));

      // Reload messages to show the new reply
      loadMessages();
    }

    // Function to submit a new message
    function submitMessage(event) {
      event.preventDefault();
      const name = document.getElementById('name').value;
      const message = document.getElementById('message').value;

      // Save message to localStorage
      const storedMessages = JSON.parse(localStorage.getItem('messages')) || [];
      storedMessages.push({ name, text: message, replies: [] });
      localStorage.setItem('messages', JSON.stringify(storedMessages));

      // Display the new message
      loadMessages();

      // Clear the form
      document.getElementById('name').value = '';
      document.getElementById('message').value = '';
    }

    // Initialize the page with existing messages
    window.onload = loadMessages;
  </script>

  <footer style="text-align: center; padding: 15px; background-color: #34495e; color: white; font-size: 14px;">
    &copy; 2024 Chairul Iman. Semua hak dilindungi.
  </footer>

</body>
</html>
